<html>

<head>
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div id = "consoleBox">
        <h1>
            Console Stuff:
        </h1>
        <div id="consoleWords"></div>
        <br> <br>
        <input type="text" id="userInput" placeholder="Enter Your Command Here (Press Enter To Exceute)">

        
        <input type="text" id="userName">

        <input type="password" id = "passWord">

        <button id = "guest" onclick="goGuest()">temp guest</button>

        <button id = "admin" onclick = "goAdmin()">temp admin</button>

    </div>

    <script>
        setInterval(fetchLog, 2000);
        fetchLog();

        document.getElementById('userInput').addEventListener('keypress', function (event) {
            if (event.keyCode == 13) { //if enter key is pressed :)
                runCommand();
            }
        });

        function validateUser() {
            var username = document.getElementById("userName");
            var password = document.getElementById("passWord");

            if(username == "root" && password == "") {

            }
        }

        function fetchLog() {
            //this is fetch stuff
            fetch('latest.log')
                .then(response => response.text())
                .then(logData => {

                    const lines = logData.split('\n'); //this spilts the text based off the /n (it auto generates /n when reading the file)

                    const last10Lines = lines.slice(-20); //this makes it where it only keeps the last 20 lines of data

                    const formattedLog = last10Lines.join('<br>'); //this joins the splited text with a <br> between them all

                    document.getElementById('consoleWords').innerHTML = formattedLog;
                })
                .catch(error => {
                    console.error('Error fetching log file:', error);
                });
        }

        function runCommand() {
            //Idk how to code this part but you would send the command to rcon to run it? then after that command you would have to send the updated log to the server

            //location.reload(); //and this would reload the page, loading the log again
            fetchLog(); //or you could just run the fetch log thing again
            document.getElementById("userInput").value = ""; //this would enpty the text
        }

        function goAdmin() {
            window.location.href = "admin.html";
        }

        function goGuest() {
            window.location.href = "guest.html";
        }
    </script>
</body>

</html>